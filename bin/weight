#! /usr/bin/env ruby

require "yaml"
require "pp"

file = ARGV[0]

yaml = YAML.load_file file
results = {}
yaml.each do |key, weight|
  #val_log2 = (Math::log(weight)/Math::log(2.0)).to_i
  results[weight] ||= 0
  results[weight] += 1
end

max = results.values.max
0.upto(16) do |i|
  weight = 2**i
  num = results[weight] || 0
  width = 60
  stars = "*" * (width * num / max)
  printf("%6d(%4d)| #{stars} \n", weight, num)
end
